# ğŸ›¡ï¸ Guia RÃ¡pido de PermissÃµes no FiveM

Este guia tem como objetivo explicar como funcionam as permissÃµes no FiveM, como configurÃ¡-las corretamente, e como utilizÃ¡-las em conjunto com recursos como `ox_lib` e scripts que dependem de permissÃµes por `ACE`.

---

## ğŸ§  Conceitos Fundamentais

### ğŸ”‘ Principals

Um **principal** representa uma entidade que pode receber permissÃµes:

* `group.admin`
* `identifier.steam:110000112345678`
* `resource.meu_script`

### ğŸ¯ Objetos

Um **objeto** representa uma aÃ§Ã£o ou permissÃ£o especÃ­fica:

* `command` (acesso a qualquer comando)
* `command.giveitem` (acesso a um comando especÃ­fico)
* `admin`, `mod`, `qbadmin.join` (padrÃµes usados por scripts)

### âœ… PermissÃ£o: allow / deny

Define se o principal tem acesso (`allow`) ou nÃ£o (`deny`) ao objeto.

---

## âš™ï¸ Comandos de Controle de Acesso

### â• `add_ace`

Adiciona uma permissÃ£o para um principal sobre um objeto.

```cfg
add_ace [principal] [object] [allow|deny]
```

**Exemplo:**

```cfg
add_ace group.admin command.giveitem allow
```

### âŒ `remove_ace`

Remove uma permissÃ£o existente.

```cfg
remove_ace [principal] [object] [allow|deny]
```

**Exemplo:**

```cfg
remove_ace identifier.steam:110000112345678 command.apple deny
```

### ğŸ‘¥ `add_principal`

Faz um principal herdar permissÃµes de outro.

```cfg
add_principal [child] [parent]
```

**Exemplo:**

```cfg
add_principal identifier.steam:110000112345678 group.admin
```

### ğŸ” `remove_principal`

Remove uma heranÃ§a entre principals.

```cfg
remove_principal [child] [parent]
```

### ğŸ§ª `test_ace`

Testa se um principal tem permissÃ£o para um objeto.

```bash
test_ace group.admin command.adminstuff
```

---

## ğŸ“¦ IntegraÃ§Ã£o com ox\_lib

A `ox_lib` permite registrar comandos com permissÃµes diretamente.

### ğŸ’¡ Exemplo:

```lua
lib.addCommand('giveitem', {
  help = 'Gives an item to a player',
  params = {
    { name = 'target', type = 'playerId', help = 'Target player\'s server id' },
    { name = 'item', type = 'string', help = 'Name of the item to give' },
    { name = 'count', type = 'number', help = 'Amount to give', optional = true },
    { name = 'metatype', help = 'Sets metadata.type', optional = true }
  },
  restricted = 'group.admin'
}, function(source, args, raw)
  Inventory.AddItem(args.target, args.item, args.count or 1, args.metatype)
end)
```

O campo `restricted` aceita:

* `false`: comando livre
* `true`: comando restrito a admins
* `'group.admin'`: ACE especÃ­fico
* `{'group.admin', 'group.mod'}`: mÃºltiplos grupos

---

## ğŸ“ Exemplo de Arquivo de PermissÃµes (`server.cfg`)

```cfg
# PermissÃ£o total para comandos do grupo admin
group.admin command allow

# Permitir qbx_core executar comandos
add_ace resource.qbx_core command allow

# ox_lib - permitir controle de ACEs
add_ace resource.ox_lib command.add_ace allow
add_ace resource.ox_lib command.remove_ace allow
add_ace resource.ox_lib command.add_principal allow
add_ace resource.ox_lib command.remove_principal allow

# PermissÃµes personalizadas para grupos
add_ace group.admin admin allow
add_ace group.mod mod allow
add_ace group.support support allow
add_ace group.support qbadmin.join allow

# HeranÃ§a de grupos
add_principal group.admin group.mod
add_principal group.mod group.support

# Permitir comandos de scripts
add_ace resource.zdiscord command.add_principal allow
add_ace resource.zdiscord command.remove_principal allow

```

---

## ğŸ’¡ Dicas e Boas PrÃ¡ticas

* ğŸ—‚ï¸ Sempre organize seus grupos de permissÃ£o e mantenha padrÃµes de nome.
* ğŸš« Evite dar `command allow` global a nÃ£o ser em scripts confiÃ¡veis.
* ğŸ§ª Utilize `test_ace` para diagnosticar permissÃµes.
* ğŸ” Use `restricted` no `ox_lib` para proteger comandos.
* ğŸ“‹ Scripts como `zdiscord`, `qb-adminmenu`, `ox_target` e outros fazem uso extensivo de ACEs, entÃ£o mantenha sua configuraÃ§Ã£o revisada.

---

## ğŸ ConclusÃ£o

Compreender e configurar corretamente as permissÃµes no FiveM garante mais seguranÃ§a, organizaÃ§Ã£o e controle sobre sua comunidade e scripts. Use este guia como referÃªncia sempre que precisar criar ou auditar suas permissÃµes. ğŸš€