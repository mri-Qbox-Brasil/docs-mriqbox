# Server

## Trigger Client Callback

### lib.callback

A resposta é tratada em uma coroutine separada.

```lua
lib.callback(name, playerId, cb, ...)
```

- name: `string`
- playerId: `number`
- cb: `function`
- ...: `any`

```lua
lib.callback('ox:getNearbyVehicles', source, function(vehicles)
    for i = 1, #vehicles do
        DeleteEntity(entity)
    end
end, args.radius)
```

### lib.callback.await

A coroutine atual é suspensa até que uma resposta seja recebida.

```lua
lib.callback.await(name, playerId, ...)
```

- name: `string`
- playerId: `number`
- ...: `any`

```lua
local vehicles = lib.callback.await('ox:getNearbyVehicles', source, args.radius)

for i = 1, #vehicles do
    DeleteEntity(entity)
end
```

## Register Server Callback

### lib.callback.register

Registra um manipulador de evento para responder a requisições do cliente.

```lua
lib.callback.register(name, cb)
```

- name: `string`
- cb: `function`

```lua
lib.callback.register('ox_inventory:getItemCount', function(source, item, metadata, target)
    local inventory = target and Inventory(target) or Inventory(source)
    return (inventory and Inventory.GetItem(inventory, item, metadata, true)) or 0
end)
```
